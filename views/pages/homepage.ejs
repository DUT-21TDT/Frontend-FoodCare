<div class="container-fluid" id="container_w100">
  <div id="slider">
    <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="../assets/images/delicious-healthy-asian-food-white-background.jpg" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
          <img src="../assets/images/fried-rice-with-shrimp-prawn-top-white-plate.jpg" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
          <img src="../assets/images/lifestyle-food-pasta-yummy-gourmet.jpg" class="d-block w-100" alt="...">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"
        data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls"
        data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
</div>

<div id="content">
  <div class="container food_in4" id="food_information">
    <div class="row text-center pt-4">
      <h1>Food Information</h1>
      <p style="font-size: 25px;">Provide you more knowledge about nutrition</p>
    </div>
    <div class="row justify-content-md-center pt-5">
      <div class="col-lg-6">
        <div class="input-group food_search-input">
          <input type="search" class="form-control rounded search_box" placeholder="Search" aria-label="Search"
            aria-describedby="search-addon" />
        </div>
      </div>
      <div class="row d-flex justify-content-md-center pt-5">
        <div class="col-lg-9 d-flex justify-content-md-between food_result-container">

        </div>
      </div>
      <div class="btn-toolbar justify-content-md-center result_page food_page-btn" role="toolbar"
        aria-label="Toolbar with button groups">
      </div>
    </div>
  </div>
  <!-- BMI CALCULATOR -->
  <div class="container-fluid bmi_cal" id="bmi_calculator">
    <div class="container bmi_cal">
      <div class="row text-center pt-4">
        <h1>Fill your information</h1>
        <p style="font-size: 25px;">To calculate your BMI and know the suitable menu</p>
      </div>
      <div class="g-col-9 pt-5 d-flex justify-content-between bmi_container">
        <div class="bmi_img">
          <img src="../assets/images/bmi_pic.jpg" style="height: 400px; width: 400px;" alt="">
        </div>
        <form action="" class="fill_info">
          <div class="bmi_input">
            <input placeholder="Your weight is ... (kg)" type="text" class="weight_input"
              style="border:  1px solid black;">
            <i class="fa-solid fa-weight-scale fa-xl"></i>
          </div>
          <div class="bmi_input">
            <input placeholder="Your height is ... (cm)" type="text" class="height_input"
              style="border:  1px solid black;">
            <i class="fa-solid fa-ruler-vertical fa-xl"></i>
          </div>
          <div class="bmi_input">
            <input placeholder="Your BMI is ..." type="text" class="bmi_result" readonly
              style="border:  1px solid black;">
            <i class="fa-solid fa-calculator fa-xl"></i>
          </div>
        </form>
      </div>

      <div class="g-col-5 d-flex justify-content-center pt-5 bmi_btn">
        <% if (userId) { %>
          <a href="/user/profile" class="cal_btn info_btn text-center">
            <% } else { %>
              <a class="cal_btn info_btn js-click-login text-center">
                <% } %>
                  More information
              </a>
              <button type="button" class="cal_btn calculator-bmi-js">Calculate</button>
      </div>
    </div>

  </div>

  <!-- Menu nutrition -->
  <div class="container food_in4 menu_nutrition" id="menu_nutrition">
    <div class="row text-center pt-4">
      <h1>Menu</h1>
      <p style="font-size: 25px;">Create your favorite menu and more...</p>
    </div>
    <div class="row justify-content-md-center pt-5">
      <div class="col-lg-6">
        <div class="input-group menu_search-input">
          <input type="search" class="form-control rounded search_box" placeholder="Search" aria-label="Search"
            aria-describedby="search-addon" />
        </div>
      </div>
      <div class="row d-flex justify-content-md-center pt-5">
        <div class="col-lg-9 d-flex justify-content-md-between menu_result-container">

        </div>
      </div>

      <div class="btn-toolbar justify-content-md-center result_page menu_page-btn" role="toolbar"
        aria-label="Toolbar with button groups">

      </div>
    </div>
  </div>

  <!-- Food Suggestion -->
  <div class="container-fluid food_suggest" id="food_suggestion">
    <div class="row text-center pt-4 ">
      <h1>Food Suggestion</h1>
      <p style="font-size: 25px;">Help you to decide what to eat immediately...</p>
    </div>

    <div class="row text-center pt-5 justify-content-md-center">
      <div class="col-lg-6">
        <div class="input-group justify-content-center align-items-center tags_data">

        </div>
      </div>
    </div>

    <div class="g-col-3 justify-content-md-center">
      <div class="row text-center justify-content-md-center random_container">
        <h2>You want to eat...</h2>
        <div class="random_result">
          <div class="ran_img_container">
            <img src="../assets/images/initRandomImg.png" class="rand_img" alt="">
          </div>
          <h2 class="pt-4 pb-4">???</h2>
        </div>
        <% if (userId) { %>
          <button class="rand-btn random_js-btn">
            <% } else { %>
              <button class="rand-btn js-click-login">
                <% } %>
                  RANDOM
              </button>
      </div>
    </div>

  </div>

</div>
<script src="../assets/js/getData.js"></script>
<% if (!userId) { %>
  <script src="../assets/js/getGuestData.js"></script>
  <% } else { %>
    <script src="../assets/js/getUserData.js"></script>
    <% } %>

      <script>
        $(".calculator-bmi-js").click(function (event) {
          event.preventDefault();
          var h = $(".height_input").val();
          var w = $(".weight_input").val();
          var height = parseFloat(h / 100);
          var weight = parseFloat(w);
          if (isNaN(height) || isNaN(weight) || height <= 0 || weight <= 0) {
            // Nếu không hợp lệ, hiển thị kết quả là "Không hợp lệ"
            $('.bmi_result').val('Vui lòng nhập thông tin hợp lệ');
          } else {
            // Nếu hợp lệ, tính chỉ số BMI và hiển thị kết quả
            var bmi = weight / (height * height);
            $('.bmi_result').val("Your BMI is " + bmi.toFixed(2));
            var status;
            if (bmi < 16) {
              status = 'Gầy độ III';
            } else if (bmi >= 16 && bmi < 17) {
              status = 'Gầy độ II';
            } else if (bmi >= 17 && bmi < 18.5) {
              status = 'Gầy độ I';
            } else if (bmi >= 18.5 && bmi < 25) {
              status = 'Bình thường';
            }
            else if (bmi >= 25 && bmi < 30) {
              status = 'Thừa cân';
            }
            else if (bmi >= 30 && bmi < 35) {
              status = 'Béo phì độ I';
            }
            else if (bmi >= 35 && bmi < 40) {
              status = 'Béo phì độ II';
            }
            else if (bmi >= 40) {
              status = 'Béo phì độ III';
            }
          }


          var pElements = $('.bmi_input:last').siblings('p:first');
          if (pElements.length > 0) {
            pElements.text('Chỉ số BMI cho thấy rằng sức khoẻ của bạn là ' + status);
          } else {
            $('.bmi_input:last').after('<p style = "color : var(--secondary); font-size:1.1rem; font-weight: 500 word-wrap: break-word; max-width: 380px;">' + 'Chỉ số BMI cho thấy rằng sức khoẻ của bạn là ' + status + '</p>');
          }
        }
        )
      </script>